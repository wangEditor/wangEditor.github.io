import{_ as c,r as o,o as r,c as u,a as s,b as a,w as l,F as i,e as p,d as n}from"./app.e69b5eec.js";var k="/image/\u67B6\u6784\u56FE.png",m="/image/extend-api.png";const d={},b=p('<h1 id="\u81EA\u5B9A\u4E49\u6269\u5C55\u65B0\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u6269\u5C55\u65B0\u529F\u80FD" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49\u6269\u5C55\u65B0\u529F\u80FD</h1><p>wangEditor \u4ECE V5 \u5F00\u59CB\uFF0C\u6E90\u7801\u4E0A\u5C31\u5206\u79BB\u4E86 core editor \u8FD8\u6709\u5404\u4E2A module \u3002<br> core \u662F\u6838\u5FC3 API \uFF0Ceditor \u8D1F\u8D23\u6C47\u603B\u96C6\u6210\u3002\u6240\u6709\u7684\u5177\u4F53\u529F\u80FD\uFF0C\u90FD\u5206\u5E03\u5728\u5404\u4E2A module \u4E2D\u6765\u5B9E\u73B0\u3002</p><p>\u6240\u4EE5\uFF0C\u4ECE\u5E95\u5C42\u8BBE\u8BA1\u5C31\u4FDD\u8BC1\u4E86\u6269\u5C55\u6027\u3002</p><p><img src="'+k+'" alt=""></p><h2 id="\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u6982\u8FF0" aria-hidden="true">#</a> \u6982\u8FF0</h2><p>wangEditor \u6269\u5C55\u6027\u5305\u62EC\u4EE5\u4E0B\u90E8\u5206\uFF0C\u4F60\u53EF\u4EE5\u6765\u6269\u5C55\u5927\u90E8\u5206\u5E38\u7528\u7684\u529F\u80FD\u3002</p><ul><li>\u5B9A\u4E49\u65B0\u5143\u7D20\uFF08\u5982 todo-list \u3001\u94FE\u63A5\u5361\u7247\u3001<code>@xxx</code> \u529F\u80FD\uFF0C\u63D2\u5165\u5730\u56FE\u7B49\uFF09 <ul><li>\u6E32\u67D3\u5230\u7F16\u8F91\u5668</li><li>\u663E\u793A\u65F6\u83B7\u53D6 html</li></ul></li><li>\u52AB\u6301\u7F16\u8F91\u5668\u7684 API \u5E76\u81EA\u5B9A\u4E49\uFF08\u5982\u8F93\u5165 <code>#</code> \u4E4B\u540E\uFF0C\u5207\u6362\u4E3A H1 \uFF0C\u5B9E\u73B0\u7B80\u5355\u7684 markdown \u529F\u80FD\uFF09</li><li>\u6269\u5C55\u83DC\u5355</li></ul><h2 id="\u5143\u7D20\u7684\u6570\u636E\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u5143\u7D20\u7684\u6570\u636E\u7ED3\u6784" aria-hidden="true">#</a> \u5143\u7D20\u7684\u6570\u636E\u7ED3\u6784</h2><p>\u5982\u679C\u4F60\u9700\u8981\u6269\u5C55\u65B0\u5143\u7D20\uFF0C\u5219\u9700\u8981\u5148\u5B9A\u4E49\u6570\u636E\u7ED3\u6784\u3002<br> \u5982\u679C\u4E0D\u9700\u8981\uFF0C\u5219\u5FFD\u7565\u8BE5\u6B65\u9AA4\u3002</p>',9),h=n("\u5177\u4F53\u53EF\u53C2\u8003 "),g=n("\u8282\u70B9\u6570\u636E\u7ED3\u6784"),y=n(" \uFF0C\u5B9A\u4E49\u81EA\u5DF1\u7684\u8282\u70B9\u6570\u636E\u7ED3\u6784\u3002"),_=s("br",null,null,-1),w=n(" \u6CE8\u610F\u8981\u7B26\u5408 "),f={href:"https://docs.slatejs.org/",target:"_blank",rel:"noopener noreferrer"},x=n("slate.js"),v=n(" \u7684\u6570\u636E\u89C4\u8303\u3002"),S=s("h2",{id:"render",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#render","aria-hidden":"true"},"#"),n(" Render")],-1),E=n("\u9700\u8981\u4F60\u63D0\u524D\u4E86\u89E3 vdom \u6982\u5FF5\uFF0C\u4EE5\u53CA "),M={href:"https://github.com/snabbdom/snabbdom",target:"_blank",rel:"noopener noreferrer"},H=n("snabbdom.js"),B=n(" \u548C\u5B83\u7684 "),T=s("code",null,"h",-1),C=n(" \u51FD\u6570\u3002"),D=p('<p>\u5982\u679C\u4F60\u5B9A\u4E49\u4E86\u65B0\u5143\u7D20\uFF0C\u5219\u9700\u8981\u628A\u5B83\u663E\u793A\u5230\u7F16\u8F91\u5668\u5185\u3002\u4E3B\u8981\u8FC7\u7A0B\u662F\uFF1A<strong>model -&gt; \u751F\u6210 vdom -&gt; \u6E32\u67D3 DOM</strong> <br> \u7528\u5230\u4E86 vdom \u9700\u8981\u5B89\u88C5 <code>snabbdom</code>\uFF0C\u53C2\u8003\u4E0A\u6587\u3002</p><p><img src="'+m+`" alt=""></p><h3 id="\u5B89\u88C5-snabbdom-js" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-snabbdom-js" aria-hidden="true">#</a> \u5B89\u88C5 snabbdom.js</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> snabbdom --peer
<span class="token comment">## \u5B89\u88C5\u5230 package.json \u7684 peerDependencies \u4E2D\u5373\u53EF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="renderelem" tabindex="-1"><a class="header-anchor" href="#renderelem" aria-hidden="true">#</a> renderElem</h3><p>\u589E\u52A0\u4E86\u65B0\u7684\u5143\u7D20\uFF0C\u9700\u8981\u6E32\u67D3\u5230\u7F16\u8F91\u5668\u4E2D\u3002</p><p>\u6CE8\u610F\uFF1A</p><ul><li>\u5FC5\u987B\u5728\u521B\u5EFA\u7F16\u8F91\u5668\u4E4B\u524D\u6CE8\u518C</li><li>\u5168\u5C40\u53EA\u80FD\u6CE8\u518C\u4E00\u6B21\uFF0C\u4E0D\u8981\u91CD\u590D\u6CE8\u518C</li></ul><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h<span class="token punctuation">,</span> VNode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;snabbdom&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> IDomEditor<span class="token punctuation">,</span> SlateElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>

<span class="token comment">// \u6E32\u67D3\u51FD\u6570</span>
<span class="token keyword">function</span> <span class="token function">renderParagraph</span><span class="token punctuation">(</span>elem<span class="token operator">:</span> SlateElement<span class="token punctuation">,</span> children<span class="token operator">:</span> VNode<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span> editor<span class="token operator">:</span> IDomEditor<span class="token punctuation">)</span><span class="token operator">:</span> VNode <span class="token punctuation">{</span>
    <span class="token comment">// elem \u5373\u5F53\u524D\u8282\u70B9</span>
    <span class="token comment">// children \u662F\u4E0B\u7EA7\u8282\u70B9</span>
    <span class="token comment">// editor \u5373\u7F16\u8F91\u5668\u5B9E\u4F8B</span>

    <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;p&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> children<span class="token punctuation">)</span> <span class="token comment">// type: &#39;paragraph&#39; \u8282\u70B9\uFF0C\u5373\u6E32\u67D3\u4E3A &lt;p&gt; \u6807\u7B7E</span>
    <span class="token keyword">return</span> vnode
<span class="token punctuation">}</span>

<span class="token comment">// \u6E32\u67D3\u914D\u7F6E</span>
<span class="token keyword">const</span> renderElemConf <span class="token operator">=</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#39;paragraph&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u8282\u70B9 type \uFF0C\u91CD\u8981\uFF01\uFF01\uFF01</span>
    renderElem<span class="token operator">:</span> renderParagraph<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6CE8\u518C\u5230 wangEditor</span>
Boot<span class="token punctuation">.</span><span class="token function">registerRenderElem</span><span class="token punctuation">(</span>renderElemConf<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div>`,9),I=n("PS\uFF1A"),V=s("code",null,"h",-1),P=n(" \u51FD\u6570\u7684\u4F7F\u7528\uFF0C\u8BF7\u53C2\u8003 "),$={href:"https://github.com/snabbdom/snabbdom",target:"_blank",rel:"noopener noreferrer"},N=n("snabbdom"),j=p(`<h3 id="renderstyle" tabindex="-1"><a class="header-anchor" href="#renderstyle" aria-hidden="true">#</a> renderStyle</h3><p>\u6E32\u67D3 CSS \u6837\u5F0F\uFF0C\u6700\u57FA\u672C\u7684\u4E00\u4E9B\u6837\u5F0F\uFF08\u5982\u52A0\u7C97\u3001\u659C\u4F53\u3001\u989C\u8272\u3001\u5BF9\u9F50\u65B9\u5F0F\u7B49\uFF09\u7F16\u8F91\u5668\u5DF2\u7ECF\u81EA\u5E26\u4E86\u3002 \u5982\u679C\u4F60\u9700\u8981\u518D\u81EA\u5B9A\u4E49\u65B0\u7684\u6837\u5F0F\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u6765\u6CE8\u518C\u3002</p><p>\u6CE8\u610F\uFF1A</p><ul><li>\u5FC5\u987B\u5728\u521B\u5EFA\u7F16\u8F91\u5668\u4E4B\u524D\u6CE8\u518C</li><li>\u5168\u5C40\u53EA\u80FD\u6CE8\u518C\u4E00\u6B21\uFF0C\u4E0D\u8981\u91CD\u590D\u6CE8\u518C</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h<span class="token punctuation">,</span> VNode<span class="token punctuation">,</span> VNodeStyle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;snabbdom&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> SlateElement<span class="token punctuation">,</span> SlateText<span class="token punctuation">,</span> SlateDescendant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>

<span class="token doc-comment comment">/**
 * \u7ED9 vnode \u6DFB\u52A0\u6837\u5F0F
 * <span class="token keyword">@param</span> <span class="token parameter">vnode</span> vnode
 * <span class="token keyword">@param</span> <span class="token parameter">newStyle</span> <span class="token punctuation">{</span> key: val <span class="token punctuation">}</span>
 */</span>
<span class="token keyword">function</span> <span class="token function">addVnodeStyle</span><span class="token punctuation">(</span>vnode<span class="token operator">:</span> VNode<span class="token punctuation">,</span> newStyle<span class="token operator">:</span> VNodeStyle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>data <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> vnode<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> vnode<span class="token punctuation">.</span>data
  <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>style <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> data<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>style<span class="token punctuation">,</span> newStyle<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * render style
 * <span class="token keyword">@param</span> <span class="token parameter">node</span> slate node
 * <span class="token keyword">@param</span> <span class="token parameter">vnode</span> vnode
 * <span class="token keyword">@returns</span> new vnode
 */</span>
<span class="token keyword">function</span> <span class="token function">renderStyle</span><span class="token punctuation">(</span>node<span class="token operator">:</span> SlateDescendant<span class="token punctuation">,</span> vnode<span class="token operator">:</span> VNode<span class="token punctuation">)</span><span class="token operator">:</span> VNode <span class="token punctuation">{</span>
    <span class="token comment">// 1. \u83B7\u53D6\u6837\u5F0F\u76F8\u5173\u7684\u5C5E\u6027</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> bold<span class="token punctuation">,</span> color <span class="token punctuation">}</span> <span class="token operator">=</span> node <span class="token keyword">as</span> SlateText
    <span class="token comment">// const { lineHeight } = node as SlateElement // node \u53EF\u80FD\u662F Text \u4E5F\u53EF\u80FD\u662F Element</span>
    <span class="token keyword">let</span> newVnode <span class="token operator">=</span> vnode

    <span class="token comment">// 2. \u4E3A vnode \u6DFB\u52A0\u6837\u5F0F\u6807\u7B7E</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bold<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      newVnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;strong&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>newVnode<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">addVnodeStyle</span><span class="token punctuation">(</span>newVnode<span class="token punctuation">,</span> <span class="token punctuation">{</span> color <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// if (lineHeight) {</span>
    <span class="token comment">//   addVnodeStyle(newVnode, { lineHeight })</span>
    <span class="token comment">// }</span>

    <span class="token comment">// 3. \u8FD4\u56DE\u6DFB\u52A0\u4E86\u6837\u5F0F\u7684 vnode</span>
    <span class="token keyword">return</span> newVnode
<span class="token punctuation">}</span>

<span class="token comment">// \u6CE8\u518C\u5230 wangEditor</span>
Boot<span class="token punctuation">.</span><span class="token function">registerRenderStyle</span><span class="token punctuation">(</span>renderStyle<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div>`,5),q=n("PS\uFF1A"),A=s("code",null,"h",-1),L=n(" \u51FD\u6570\u7684\u4F7F\u7528\uFF0C\u8BF7\u53C2\u8003 "),R={href:"https://github.com/snabbdom/snabbdom",target:"_blank",rel:"noopener noreferrer"},O=n("snabbdom"),F=p(`<h2 id="to-html" tabindex="-1"><a class="header-anchor" href="#to-html" aria-hidden="true">#</a> To HTML</h2><p>\u5728\u663E\u793A\u7F16\u8F91\u5668\u5185\u5BB9\u65F6 \uFF0C\u65E0\u8BBA\u4EC0\u4E48\u6E32\u67D3\u5F62\u5F0F\uFF0C\u90FD\u9700\u8981\u5F97\u5230\u5404\u4E2A\u5143\u7D20\u7684 html\u3002\u6240\u4EE5\u5BF9\u4E8E\u65B0\u5143\u7D20\uFF0C\u5FC5\u987B\u8981\u6269\u5C55 toHtml \u65B9\u6CD5\u3002</p><h3 id="elemtohtml" tabindex="-1"><a class="header-anchor" href="#elemtohtml" aria-hidden="true">#</a> elemToHtml</h3><p>\u751F\u6210\u5143\u7D20\u7684 html</p><p>\u6CE8\u610F\uFF1A</p><ul><li>\u5FC5\u987B\u5728\u521B\u5EFA\u7F16\u8F91\u5668\u4E4B\u524D\u6CE8\u518C</li><li>\u5168\u5C40\u53EA\u80FD\u6CE8\u518C\u4E00\u6B21\uFF0C\u4E0D\u8981\u91CD\u590D\u6CE8\u518C</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> SlateElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>

<span class="token comment">// \u751F\u6210 html \u7684\u51FD\u6570</span>
<span class="token keyword">function</span> <span class="token function">paragraphToHtml</span><span class="token punctuation">(</span>elem<span class="token operator">:</span> SlateElement<span class="token punctuation">,</span> childrenHtml<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>childrenHtml <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&#39;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;&#39;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;p&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>childrenHtml<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;</span><span class="token template-punctuation string">\`</span></span>
<span class="token punctuation">}</span>

<span class="token comment">// \u914D\u7F6E</span>
<span class="token keyword">const</span> elemToHtmlConf <span class="token operator">=</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#39;paragraph&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u8282\u70B9 type \uFF0C\u91CD\u8981\uFF01\uFF01\uFF01</span>
    elemToHtml<span class="token operator">:</span> paragraphToHtml<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6CE8\u518C\u5230 wangEditor</span>
Boot<span class="token punctuation">.</span><span class="token function">registerElemToHtml</span><span class="token punctuation">(</span>elemToHtmlConf<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div>`,7),z=n("\u53EF\u53C2\u8003 wangEditor \u6E90\u7801\u4E2D "),X={href:"https://github.com/wangeditor-team/wangEditor/tree/master/packages/basic-modules/src/modules",target:"_blank",rel:"noopener noreferrer"},G=n("\u57FA\u7840\u6A21\u5757"),J=n(" \u4E2D\u5404\u4E2A\u6A21\u5757\u7684\u6240\u6709 "),K=s("code",null,"elem-to-html.ts",-1),Q=n(" \u6587\u4EF6\u3002"),U=p(`<h3 id="styletohtml" tabindex="-1"><a class="header-anchor" href="#styletohtml" aria-hidden="true">#</a> styleToHtml</h3><p>\u751F\u6210 CSS \u6837\u5F0F\u7684 html \uFF0C\u5982\u6587\u672C\u7684\u52A0\u7C97\u3001\u659C\u4F53\u3001\u989C\u8272\u7B49\uFF0C\u8FD8\u6709\u6BB5\u843D\u7684\u5BF9\u9F50\u3001\u884C\u9AD8\u7B49\u3002</p><p>\u6CE8\u610F\uFF1A</p><ul><li>\u5FC5\u987B\u5728\u521B\u5EFA\u7F16\u8F91\u5668\u4E4B\u524D\u6CE8\u518C</li><li>\u5168\u5C40\u53EA\u80FD\u6CE8\u518C\u4E00\u6B21\uFF0C\u4E0D\u8981\u91CD\u590D\u6CE8\u518C</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> SlateText<span class="token punctuation">,</span> SlateElement<span class="token punctuation">,</span> SlateDescendant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>
<span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&#39;dom7&#39;</span> <span class="token comment">// jquery \u4E5F\u53EF\u4EE5</span>

<span class="token doc-comment comment">/**
 * style to html
 * <span class="token keyword">@param</span> <span class="token parameter">node</span> slate node
 * <span class="token keyword">@param</span> <span class="token parameter">nodeHtml</span> node html
 * <span class="token keyword">@returns</span> styled html
 */</span>
<span class="token keyword">function</span> <span class="token function">styleToHtml</span><span class="token punctuation">(</span>node<span class="token operator">:</span> SlateDescendant<span class="token punctuation">,</span> nodeHtml<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. \u83B7\u53D6\u6837\u5F0F\u76F8\u5173\u7684\u5C5E\u6027\u83B7\u53D6\u5C5E\u6027</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> color<span class="token punctuation">,</span> bgColor <span class="token punctuation">}</span> <span class="token operator">=</span> node <span class="token keyword">as</span> SlateText
    <span class="token comment">// const { lineHeight } = node as SlateElement // node \u53EF\u80FD\u662F Text \u4E5F\u53EF\u80FD\u662F Element</span>

    <span class="token comment">// \u8BBE\u7F6E css \u6837\u5F0F</span>
    <span class="token keyword">const</span> $elem <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>elemHtml<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>color<span class="token punctuation">)</span> $elem<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">&#39;color&#39;</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bgColor<span class="token punctuation">)</span> $elem<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">&#39;background-color&#39;</span><span class="token punctuation">,</span> bgColor<span class="token punctuation">)</span>
    <span class="token comment">// $elem.css(&#39;line-height&#39;, lineHeight)</span>

    <span class="token comment">// \u8F93\u51FA html</span>
    <span class="token keyword">return</span> $elem<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>outerHTML
<span class="token punctuation">}</span>

<span class="token comment">// \u6CE8\u518C\u5230 wangEditor</span>
Boot<span class="token punctuation">.</span><span class="token function">registerStyleToHtml</span><span class="token punctuation">(</span>styleToHtml<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div>`,5),W=n("\u53EF\u53C2\u8003 wangEditor \u6E90\u7801\u4E2D "),Y={href:"https://github.com/wangeditor-team/wangEditor/blob/master/packages/basic-modules/src/modules/color/style-to-html.ts",target:"_blank",rel:"noopener noreferrer"},Z=n("\u989C\u8272\u3001\u80CC\u666F\u8272"),nn=n(" \u548C "),sn={href:"https://github.com/wangeditor-team/wangEditor/blob/master/packages/basic-modules/src/modules/font-size-family/style-to-html.ts",target:"_blank",rel:"noopener noreferrer"},an=n("\u5B57\u4F53\u5B57\u53F7"),en=n(" \u7684 style-to-html \u3002"),pn=p(`<h2 id="parse-html" tabindex="-1"><a class="header-anchor" href="#parse-html" aria-hidden="true">#</a> Parse HTML</h2><p>\u4E0A\u6587\u7684 toHtml \u662F\u4ECE\u7F16\u8F91\u5668\u83B7\u53D6 html \u3002\u5F97\u5230\u7684 html \u8FD8\u53EF\u80FD\u518D\u8BBE\u7F6E\u56DE\u663E\u5230\u7F16\u8F91\u5668\u4E2D\uFF0C\u8FD9\u5C31\u9700\u8981 parse html \u3002</p><h3 id="parseelemhtml" tabindex="-1"><a class="header-anchor" href="#parseelemhtml" aria-hidden="true">#</a> parseElemHtml</h3><p>\u4F8B\u5982\u7F16\u8F91\u5668\u7684\u201C\u94FE\u63A5\u201D\uFF0C\u4EE5\u4E0B\u51FD\u6570\u4F1A\u628A html <code>&#39;&lt;a href=&quot;https://www.baidu.com/&quot; target=&quot;_blank&quot;&gt;\u767E\u5EA6&lt;a/&gt;&#39;</code> \u8F6C\u6362\u4E3A slate element \u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Dom7Array <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;dom7&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> IDomEditor<span class="token punctuation">,</span> SlateDescendant<span class="token punctuation">,</span> SlateText<span class="token punctuation">,</span> SlateElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>

<span class="token doc-comment comment">/**
 * \u5C06 html \u8F6C\u6362\u4E3A slate elem
 * <span class="token keyword">@param</span> $elem \u7531 html \u751F\u6210\u7684 DOM \u8282\u70B9\uFF08Dom7 \u5C01\u88C5\uFF0C\u7C7B\u4F3C\u4E8E jquery\uFF09
 * <span class="token keyword">@param</span> <span class="token parameter">children</span> \u5B50\u8282\u70B9
 * <span class="token keyword">@param</span> <span class="token parameter">editor</span> editor
 * <span class="token keyword">@returns</span> slate element
 */</span>
<span class="token keyword">function</span> <span class="token function">parseHtml</span><span class="token punctuation">(</span>$elem<span class="token operator">:</span> Dom7Array<span class="token punctuation">,</span> children<span class="token operator">:</span> SlateDescendant<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> editor<span class="token operator">:</span> IDomEditor<span class="token punctuation">)</span><span class="token operator">:</span> SlateElement <span class="token punctuation">{</span>
  <span class="token comment">// \u8FC7\u6EE4 children</span>
  children <span class="token operator">=</span> children<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>child <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// child \u5FC5\u987B\u662F text \u6216\u8005 inline element \uFF08\u4E0D\u80FD\u662F block element\uFF09</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>SlateText<span class="token punctuation">.</span><span class="token function">isText</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>editor<span class="token punctuation">.</span><span class="token function">isInline</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// \u65E0 children \uFF0C\u5219\u53D6 $elem \u7EAF\u6587\u672C</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>children<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> text<span class="token operator">:</span> $elem<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\s+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gm</span></span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u8FD4\u56DE slate elem \uFF0C\u94FE\u63A5\u7C7B\u578B</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#39;link&#39;</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> $elem<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;href&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> $elem<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;target&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    children<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> parseHtmlConf <span class="token operator">=</span> <span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token comment">// CSS \u9009\u62E9\u5668\uFF0C\u4EE5\u5339\u914D\u201C\u94FE\u63A5\u201D\u7684 html tag</span>
  parseElemHtml<span class="token operator">:</span> parseHtml<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6CE8\u518C</span>
Boot<span class="token punctuation">.</span><span class="token function">registerParseElemHtml</span><span class="token punctuation">(</span>parseHtmlConf<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="parsestylehtml" tabindex="-1"><a class="header-anchor" href="#parsestylehtml" aria-hidden="true">#</a> parseStyleHtml</h3><p>\u4F8B\u5982\u7F16\u8F91\u5668\u5904\u7406\u989C\u8272\uFF0C\u4EE5\u4E0B\u4EE3\u7801\u53EF\u8BC6\u522B html <code>&#39;&lt;span style=&quot;color: rgb(231, 95, 51); background-color: rgb(252, 251, 207);&quot;&gt;hello&lt;/span&gt;&#39;</code> \u4E2D\u7684 <code>color</code> \u548C <code>background-color</code> \uFF0C\u5E76\u6DFB\u52A0\u5230 text node \u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Dom7Array<span class="token punctuation">,</span> SlateText <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;dom7&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> SlateDescendant<span class="token punctuation">,</span> SlateText<span class="token punctuation">,</span> IDomEditor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>

<span class="token doc-comment comment">/**
 * \u8BC6\u522B html \u4E2D\u7684\u989C\u8272\uFF0C\u5E76\u6DFB\u52A0\u5230 text node
 * <span class="token keyword">@param</span> $text \u7531 html \u521B\u5EFA\u7684 DOM \u8282\u70B9\uFF08Dom7 \u521B\u5EFA\uFF0C\u7C7B\u4F3C jquery\uFF09
 * <span class="token keyword">@param</span> <span class="token parameter">node</span> text node
 * <span class="token keyword">@param</span> <span class="token parameter">editor</span> editor
 * <span class="token keyword">@returns</span> text node with color and bgColor
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">parseStyleHtml</span><span class="token punctuation">(</span>$text<span class="token operator">:</span> Dom7Array<span class="token punctuation">,</span> node<span class="token operator">:</span> SlateDescendant<span class="token punctuation">,</span> editor<span class="token operator">:</span> IDomEditor<span class="token punctuation">)</span><span class="token operator">:</span> SlateDescendant <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>SlateText<span class="token punctuation">.</span><span class="token function">isText</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> node

  <span class="token keyword">const</span> textNode <span class="token operator">=</span> node <span class="token keyword">as</span> SlateText

  <span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token function">getStyleValue</span><span class="token punctuation">(</span>$text<span class="token punctuation">,</span> <span class="token string">&#39;color&#39;</span><span class="token punctuation">)</span> <span class="token comment">// \u83B7\u53D6 style \u4E2D\u7684 color \u503C</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    textNode<span class="token punctuation">.</span>color <span class="token operator">=</span> color
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> bgColor <span class="token operator">=</span> <span class="token function">getStyleValue</span><span class="token punctuation">(</span>$text<span class="token punctuation">,</span> <span class="token string">&#39;background-color&#39;</span><span class="token punctuation">)</span> <span class="token comment">// \u83B7\u53D6 style \u4E2D\u7684 background-color \u503C</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>bgColor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    textNode<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> bgColor
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> textNode
<span class="token punctuation">}</span>

<span class="token comment">// \u6CE8\u518C</span>
Boot<span class="token punctuation">.</span><span class="token function">registerParseStyleHtml</span><span class="token punctuation">(</span>parseStyleHtml<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="\u6CE8\u518C\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u6CE8\u518C\u63D2\u4EF6" aria-hidden="true">#</a> \u6CE8\u518C\u63D2\u4EF6</h2>`,9),tn=n("wangEditor \u662F\u57FA\u4E8E "),on={href:"https://docs.slatejs.org/",target:"_blank",rel:"noopener noreferrer"},ln=n("slate.js"),cn=n(" \u5185\u6838\u7684\uFF0C\u6240\u4EE5\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528 slate.js \u63D2\u4EF6\u3002\u6240\u4EE5\u4F60\u5148\u8981\u53BB\u4E86\u89E3 slate.js \u7684 API \u548C\u63D2\u4EF6\u673A\u5236\u3002"),rn=p(`<p>\u6CE8\u610F\uFF1A</p><ul><li>\u5FC5\u987B\u5728\u521B\u5EFA\u7F16\u8F91\u5668\u4E4B\u524D\u6CE8\u518C</li><li>\u5168\u5C40\u53EA\u80FD\u6CE8\u518C\u4E00\u6B21\uFF0C\u4E0D\u8981\u91CD\u590D\u6CE8\u518C</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> IDomEditor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>

<span class="token comment">// \u5B9A\u4E49 slate \u63D2\u4EF6</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">withBreak</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> IDomEditor<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>editor<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> insertBreak <span class="token punctuation">}</span> <span class="token operator">=</span> editor
    <span class="token keyword">const</span> newEditor <span class="token operator">=</span> editor

    <span class="token comment">// \u91CD\u5199 editor insertBreak API</span>
    <span class="token comment">// \u4F8B\u5982\u505A\u4E00\u4E2A ctrl + enter \u6362\u884C\u529F\u80FD</span>
    newEditor<span class="token punctuation">.</span><span class="token function-variable function">insertBreak</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5224\u65AD\uFF0C\u5982\u679C\u6309\u952E\u662F ctrl + enter \uFF0C\u5219\u6267\u884C insertBreak</span>
        <span class="token function">insertBreak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">// \u5426\u5219\uFF0C\u5219 return</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u8FD8\u53EF\u4EE5\u91CD\u5199\u5176\u4ED6 API</span>

    <span class="token comment">// \u8FD4\u56DE editor \uFF0C\u91CD\u8981\uFF01</span>
    <span class="token keyword">return</span> newEditor
<span class="token punctuation">}</span>

<span class="token comment">// \u6CE8\u518C\u5230 wangEditor</span>
Boot<span class="token punctuation">.</span><span class="token function">registerPlugin</span><span class="token punctuation">(</span>withBreak<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div>`,3),un=n("\u53EF\u53C2\u8003 wangEditor \u6E90\u7801 "),kn={href:"https://github.com/wangeditor-team/wangEditor/tree/master/packages/basic-modules/src/modules",target:"_blank",rel:"noopener noreferrer"},mn=n("\u57FA\u7840\u6A21\u5757"),dn=n(" \u4E2D\u6240\u6709 "),bn=s("code",null,"withXxx.ts",-1),hn=n(" \u6587\u4EF6\u6E90\u7801\u3002"),gn=s("h2",{id:"\u6CE8\u518C\u83DC\u5355",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u6CE8\u518C\u83DC\u5355","aria-hidden":"true"},"#"),n(" \u6CE8\u518C\u83DC\u5355")],-1),yn=s("p",null,"\u83DC\u5355\u5206\u4E3A\u51E0\u79CD\uFF0C\u90FD\u53EF\u4EE5\u6269\u5C55",-1),_n=s("ul",null,[s("li",null,"ButtonMenu \u6309\u94AE\u83DC\u5355\uFF0C\u5982\u52A0\u7C97\u3001\u659C\u4F53"),s("li",null,"SelectMenu \u4E0B\u62C9\u83DC\u5355\uFF0C\u5982\u6807\u9898\u3001\u5B57\u4F53\u3001\u884C\u9AD8"),s("li",null,"DropPanelMenu \u4E0B\u62C9\u9762\u677F\u83DC\u5355\uFF0C\u5982\u989C\u8272\u3001\u521B\u5EFA\u8868\u683C"),s("li",null,"ModalMenu \u5F39\u51FA\u6846\u83DC\u5355\uFF0C\u5982\u63D2\u5165\u94FE\u63A5\u3001\u63D2\u5165\u7F51\u7EDC\u56FE\u7247")],-1),wn=n("\u6CE8\u610F\uFF0C\u4E0B\u9762\u4EE3\u7801\u4E2D\u7684 "),fn=s("code",null,"key",-1),xn=n(" \u5373\u83DC\u5355 key \uFF0C\u8981\u552F\u4E00\u4E0D\u91CD\u590D\u3002"),vn=s("br",null,null,-1),Sn=n(" \u6CE8\u518C\u5B8C\u83DC\u5355\u4E4B\u540E\uFF0C\u5373\u53EF\u628A\u8FD9\u4E2A "),En=s("code",null,"key",-1),Mn=n(" \u914D\u7F6E\u5230"),Hn=n("\u5DE5\u5177\u680F"),Bn=n("\u4E2D\u3002"),Tn=s("h3",{id:"buttonmenu",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#buttonmenu","aria-hidden":"true"},"#"),n(" ButtonMenu")],-1),Cn=n("\u4EE3\u7801\u5982\u4E0B\u3002\u83DC\u5355\u7684\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u53EF\u53C2\u8003\u201C\u5F15\u7528\u201D\u83DC\u5355"),Dn={href:"https://github.com/wangeditor-team/wangEditor/blob/master/packages/basic-modules/src/modules/blockquote/menu/BlockquoteMenu.ts",target:"_blank",rel:"noopener noreferrer"},In=n("\u6E90\u7801"),Vn=n("\u3002"),Pn=p(`<p>\u6CE8\u610F\uFF1A</p><ul><li>\u5FC5\u987B\u5728\u521B\u5EFA\u7F16\u8F91\u5668\u4E4B\u524D\u6CE8\u518C</li><li>\u5168\u5C40\u53EA\u80FD\u6CE8\u518C\u4E00\u6B21\uFF0C\u4E0D\u8981\u91CD\u590D\u6CE8\u518C</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> IButtonMenu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>

<span class="token comment">// \u5B9A\u4E49\u83DC\u5355 class</span>
<span class="token class-name"><span class="token keyword">class</span></span> MyButtonMenu <span class="token keyword">implements</span> <span class="token class-name">IButtonMenu</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u83DC\u5355\u914D\u7F6E\uFF0C\u53C2\u8003\u201C\u5F15\u7528\u201D\u83DC\u5355\u6E90\u7801</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u5B9A\u4E49\u83DC\u5355\u914D\u7F6E</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> menu1Conf <span class="token operator">=</span> <span class="token punctuation">{</span>
  key<span class="token operator">:</span> <span class="token string">&#39;menu1&#39;</span><span class="token punctuation">,</span> <span class="token comment">// menu key \uFF0C\u552F\u4E00\u3002\u6CE8\u518C\u4E4B\u540E\uFF0C\u53EF\u914D\u7F6E\u5230\u5DE5\u5177\u680F</span>
  <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyButtonMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6CE8\u518C\u5230 wangEditor</span>
Boot<span class="token punctuation">.</span><span class="token function">registerMenu</span><span class="token punctuation">(</span>menu1Conf<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="selectmenu" tabindex="-1"><a class="header-anchor" href="#selectmenu" aria-hidden="true">#</a> SelectMenu</h3>`,4),$n=n("\u4EE3\u7801\u5982\u4E0B\u3002\u83DC\u5355\u7684\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u53EF\u53C2\u8003\u201C\u6807\u9898\u201D\u83DC\u5355"),Nn={href:"https://github.com/wangeditor-team/wangEditor/blob/master/packages/basic-modules/src/modules/header/menu/HeaderSelectMenu.ts",target:"_blank",rel:"noopener noreferrer"},jn=n("\u6E90\u7801"),qn=n("\u3002"),An=p(`<p>\u6CE8\u610F\uFF1A</p><ul><li>\u5FC5\u987B\u5728\u521B\u5EFA\u7F16\u8F91\u5668\u4E4B\u524D\u6CE8\u518C</li><li>\u5168\u5C40\u53EA\u80FD\u6CE8\u518C\u4E00\u6B21\uFF0C\u4E0D\u8981\u91CD\u590D\u6CE8\u518C</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> ISelectMenu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>

<span class="token comment">// \u5B9A\u4E49\u83DC\u5355 class</span>
<span class="token class-name"><span class="token keyword">class</span></span> MySelectMenu <span class="token keyword">implements</span> <span class="token class-name">ISelectMenu</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u83DC\u5355\u914D\u7F6E\uFF0C\u4EE3\u7801\u53EF\u53C2\u8003\u201C\u6807\u9898\u201D\u83DC\u5355\u6E90\u7801</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u5B9A\u4E49\u83DC\u5355\u914D\u7F6E</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> menu2Conf <span class="token operator">=</span> <span class="token punctuation">{</span>
  key<span class="token operator">:</span> <span class="token string">&#39;menu2&#39;</span><span class="token punctuation">,</span> <span class="token comment">// menu key \uFF0C\u552F\u4E00\u3002\u6CE8\u518C\u4E4B\u540E\uFF0C\u53EF\u914D\u7F6E\u5230\u5DE5\u5177\u680F</span>
  <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MySelectMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6CE8\u518C\u5230 wangEditor</span>
Boot<span class="token punctuation">.</span><span class="token function">registerMenu</span><span class="token punctuation">(</span>menu2Conf<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="droppanelmenu" tabindex="-1"><a class="header-anchor" href="#droppanelmenu" aria-hidden="true">#</a> DropPanelMenu</h3>`,4),Ln=n("\u4EE3\u7801\u5982\u4E0B\u3002\u83DC\u5355\u7684\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u53EF\u53C2\u8003\u201C\u989C\u8272\u201D\u83DC\u5355"),Rn={href:"https://github.com/wangeditor-team/wangEditor/blob/master/packages/basic-modules/src/modules/color/menu/BaseMenu.ts",target:"_blank",rel:"noopener noreferrer"},On=n("\u6E90\u7801"),Fn=n("\u3002"),zn=p(`<p>\u6CE8\u610F\uFF1A</p><ul><li>\u5FC5\u987B\u5728\u521B\u5EFA\u7F16\u8F91\u5668\u4E4B\u524D\u6CE8\u518C</li><li>\u5168\u5C40\u53EA\u80FD\u6CE8\u518C\u4E00\u6B21\uFF0C\u4E0D\u8981\u91CD\u590D\u6CE8\u518C</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> IDropPanelMenu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>

<span class="token comment">// \u5B9A\u4E49\u83DC\u5355 class</span>
<span class="token class-name"><span class="token keyword">class</span></span> MyDropPanelMenu <span class="token keyword">implements</span> <span class="token class-name">IDropPanelMenu</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u83DC\u5355\u914D\u7F6E\uFF0C\u4EE3\u7801\u53EF\u53C2\u8003\u201C\u989C\u8272\u201D\u83DC\u5355\u6E90\u7801</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u5B9A\u4E49\u83DC\u5355\u914D\u7F6E</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> menu3Conf <span class="token operator">=</span> <span class="token punctuation">{</span>
  key<span class="token operator">:</span> <span class="token string">&#39;menu3&#39;</span><span class="token punctuation">,</span> <span class="token comment">// menu key \uFF0C\u552F\u4E00\u3002\u6CE8\u518C\u4E4B\u540E\uFF0C\u53EF\u914D\u7F6E\u5230\u5DE5\u5177\u680F</span>
  <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyDropPanelMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6CE8\u518C\u5230 wangEditor</span>
Boot<span class="token punctuation">.</span><span class="token function">registerMenu</span><span class="token punctuation">(</span>menu3Conf<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="modalmenu" tabindex="-1"><a class="header-anchor" href="#modalmenu" aria-hidden="true">#</a> ModalMenu</h3>`,4),Xn=n("\u4EE3\u7801\u5982\u4E0B\u3002\u83DC\u5355\u914D\u7F6E\u53EF\u53C2\u8003\u201C\u63D2\u5165\u94FE\u63A5\u201D\u83DC\u5355"),Gn={href:"https://github.com/wangeditor-team/wangEditor/blob/master/packages/basic-modules/src/modules/link/menu/InsertLink.ts",target:"_blank",rel:"noopener noreferrer"},Jn=n("\u6E90\u7801"),Kn=n("\u3002"),Qn=p(`<p>\u6CE8\u610F\uFF1A</p><ul><li>\u5FC5\u987B\u5728\u521B\u5EFA\u7F16\u8F91\u5668\u4E4B\u524D\u6CE8\u518C</li><li>\u5168\u5C40\u53EA\u80FD\u6CE8\u518C\u4E00\u6B21\uFF0C\u4E0D\u8981\u91CD\u590D\u6CE8\u518C</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> IModalMenu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>

<span class="token comment">// \u5B9A\u4E49\u83DC\u5355 class</span>
<span class="token class-name"><span class="token keyword">class</span></span> MyModalMenu <span class="token keyword">implements</span> <span class="token class-name">IModalMenu</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u83DC\u5355\u914D\u7F6E\uFF0C\u4EE3\u7801\u53EF\u53C2\u8003\u201C\u63D2\u5165\u94FE\u63A5\u201D\u83DC\u5355\u6E90\u7801</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u5B9A\u4E49\u83DC\u5355\u914D\u7F6E</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> menu4Conf <span class="token operator">=</span> <span class="token punctuation">{</span>
  key<span class="token operator">:</span> <span class="token string">&#39;menu4&#39;</span><span class="token punctuation">,</span> <span class="token comment">// menu key \uFF0C\u552F\u4E00\u3002\u6CE8\u518C\u4E4B\u540E\uFF0C\u53EF\u914D\u7F6E\u5230\u5DE5\u5177\u680F</span>
  <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyModalMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6CE8\u518C\u5230 wangEditor</span>
Boot<span class="token punctuation">.</span><span class="token function">registerMenu</span><span class="token punctuation">(</span>menu4Conf<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="\u5C01\u88C5\u4E3A\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#\u5C01\u88C5\u4E3A\u6A21\u5757" aria-hidden="true">#</a> \u5C01\u88C5\u4E3A\u6A21\u5757</h2><p>\u53EF\u4EE5\u628A\u4E0A\u8FF0\u7684 renderElem toHtml parseHtml \u63D2\u4EF6 \u83DC\u5355\u7B49\uFF0C\u5C01\u88C5\u4E3A\u4E00\u4E2A module \uFF0C\u7136\u540E\u4E00\u6B21\u6027\u6CE8\u518C\u3002</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Boot<span class="token punctuation">,</span> IModuleConf <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wangeditor/editor&#39;</span>

<span class="token keyword">const</span> module<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>IModuleConf<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  editorPlugin<span class="token operator">:</span> withBreak<span class="token punctuation">,</span>
  renderElems<span class="token operator">:</span> <span class="token punctuation">[</span>renderElemConf<span class="token punctuation">]</span><span class="token punctuation">,</span>
  renderStyle<span class="token operator">:</span> renderStyle<span class="token punctuation">,</span>
  elemsToHtml<span class="token operator">:</span> <span class="token punctuation">[</span>elemToHtmlConf<span class="token punctuation">]</span><span class="token punctuation">,</span>
  styleToHtml<span class="token operator">:</span> styleToHtml<span class="token punctuation">,</span>
  parseElemsHtml<span class="token operator">:</span> <span class="token punctuation">[</span>parseHtmlConf<span class="token punctuation">]</span><span class="token punctuation">,</span>
  parseStyleHtml<span class="token operator">:</span> parseStyleHtml<span class="token punctuation">,</span>
  menus<span class="token operator">:</span> <span class="token punctuation">[</span>menu1Conf<span class="token punctuation">,</span> menu2Conf<span class="token punctuation">,</span> menu3Conf<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

Boot<span class="token punctuation">.</span><span class="token function">registerModule</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h2><p>\u4E00\u4E2A\u6A21\u5757\u5E38\u7528\u4EE3\u7801\u6587\u4EF6\u5982\u4E0B\uFF0C\u5171\u9009\u62E9\u53C2\u8003\uFF08\u4E0D\u4E00\u5B9A\u90FD\u7528\u5230\uFF09</p><ul><li>render-elem.ts</li><li>render-style.ts</li><li>elem-to-html.ts</li><li>style-to-html.ts</li><li>parse-elem-html.ts</li><li>parse-style-html.ts</li><li>plugin.ts</li><li>menu/ <ul><li>Menu1.ts</li><li>Menu2.ts</li></ul></li></ul>`,9);function Un(Wn,Yn){const t=o("RouterLink"),e=o("ExternalLinkIcon");return r(),u(i,null,[b,s("p",null,[h,a(t,{to:"/v5/node-define.html"},{default:l(()=>[g]),_:1}),y,_,w,s("a",f,[x,a(e)]),v]),S,s("p",null,[E,s("a",M,[H,a(e)]),B,T,C]),D,s("p",null,[I,V,P,s("a",$,[N,a(e)])]),j,s("p",null,[q,A,L,s("a",R,[O,a(e)])]),F,s("p",null,[z,s("a",X,[G,a(e)]),J,K,Q]),U,s("p",null,[W,s("a",Y,[Z,a(e)]),nn,s("a",sn,[an,a(e)]),en]),pn,s("p",null,[tn,s("a",on,[ln,a(e)]),cn]),rn,s("p",null,[un,s("a",kn,[mn,a(e)]),dn,bn,hn]),gn,yn,_n,s("p",null,[wn,fn,xn,vn,Sn,En,Mn,a(t,{to:"/v5/toolbar-config.html"},{default:l(()=>[Hn]),_:1}),Bn]),Tn,s("p",null,[Cn,s("a",Dn,[In,a(e)]),Vn]),Pn,s("p",null,[$n,s("a",Nn,[jn,a(e)]),qn]),An,s("p",null,[Ln,s("a",Rn,[On,a(e)]),Fn]),zn,s("p",null,[Xn,s("a",Gn,[Jn,a(e)]),Kn]),Qn],64)}var ns=c(d,[["render",Un],["__file","development.html.vue"]]);export{ns as default};
