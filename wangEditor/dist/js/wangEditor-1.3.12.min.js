/*! wangEditor-1.3.12.js 2015-11-23 */
var BMap,define;!function(a){"function"==typeof define?define.amd?define("wangEditor",["jquery"],a):define.cmd?define(function(b,c,d){return a}):a(window.jQuery):a(window.jQuery)}(function(a){if(a(function(){var b,c=!1,d=!1,e=!1;"Microsoft Internet Explorer"===navigator.appName&&(b=navigator.appVersion.split(";")[1].replace(/[ ]/g,""),c="MSIE6.0"===b,d="MSIE7.0"===b,e="MSIE8.0"===b),(c||d||e)&&(window.onload=function(){function b(a,b){a.className="",a.innerHTML="<span style=\"font-family: 'icomoon'\">"+b+"</span>"}var c={"icon-wangEditor-link":"&#xe800;","icon-wangEditor-unlink":"&#xe801;","icon-wangEditor-code":"&#xe802;","icon-wangEditor-cancel":"&#xe803;","icon-wangEditor-terminal":"&#xe804;","icon-wangEditor-angle-down":"&#xe805;","icon-wangEditor-font":"&#xe806;","icon-wangEditor-bold":"&#xe807;","icon-wangEditor-italic":"&#xe808;","icon-wangEditor-header":"&#xe809;","icon-wangEditor-align-left":"&#xe80a;","icon-wangEditor-align-center":"&#xe80b;","icon-wangEditor-align-right":"&#xe80c;","icon-wangEditor-list-bullet":"&#xe80d;","icon-wangEditor-indent-left":"&#xe80e;","icon-wangEditor-indent-right":"&#xe80f;","icon-wangEditor-list-numbered":"&#xe810;","icon-wangEditor-underline":"&#xe811;","icon-wangEditor-table":"&#xe812;","icon-wangEditor-eraser":"&#xe813;","icon-wangEditor-text-height":"&#xe814;","icon-wangEditor-brush":"&#xe815;","icon-wangEditor-pencil":"&#xe816;","icon-wangEditor-minus":"&#xe817;","icon-wangEditor-picture":"&#xe818;","icon-wangEditor-file-image":"&#xe819;","icon-wangEditor-cw":"&#xe81a;","icon-wangEditor-ccw":"&#xe81b;","icon-wangEditor-music":"&#xe911;","icon-wangEditor-play":"&#xe912;","icon-wangEditor-location":"&#xe947;","icon-wangEditor-happy":"&#xe9df;","icon-wangEditor-sigma":"&#xea67","icon-wangEditor-enlarge2":"&#xe98b;","icon-wangEditor-shrink2":"&#xe98c;","icon-wangEditor-newspaper":"&#xe904;","icon-wangEditor-camera":"&#xe90f;","icon-wangEditor-video-camera":"&#xe914;","icon-wangEditor-file-zip":"&#xe92b;","icon-wangEditor-stack":"&#xe92e;","icon-wangEditor-credit-card":"&#xe93f;","icon-wangEditor-address-book":"&#xe944;","icon-wangEditor-envelop":"&#xe945;","icon-wangEditor-drawer":"&#xe95c;","icon-wangEditor-download":"&#xe960;","icon-wangEditor-upload":"&#xe961;","icon-wangEditor-lock":"&#xe98f;","icon-wangEditor-unlocked":"&#xe990;","icon-wangEditor-wrench":"&#xe991;","icon-wangEditor-eye":"&#xe9ce;","icon-wangEditor-eye-blocked":"&#xe9d1;","icon-wangEditor-command":"&#xea4e;","icon-wangEditor-font2":"&#xea5c;","icon-wangEditor-libreoffice":"&#xeade;","icon-wangEditor-quotes-left":"&#xe977;","icon-wangEditor-strikethrough":"&#xea65;"};a(".wangEditor-container i").each(function(){var a=this,d=this.className,e=d.match(/icon-wangEditor-[^\s'"]+/);e&&b(a,c[e[0]])})})}),!a)return void alert("检测到页面没有引用jQuery，请先引用，否则wangEditor将无法使用。");if("function"!=typeof a||/^\d+\.\d+\.\d+$/.test(a().jquery)===!1)return void alert("检测到 window.jQuery 已被修改，wangEditor无法使用。");var b=window.document,c=a(b),d=(a(window),a("body"),"function"==typeof b.createRange),e=!!window.ActiveXObject||"ActiveXObject"in window,f=navigator.userAgent.indexOf("Firefox")>0,g="wangeditor_"+Math.random().toString().replace(".","")+"_",h=1,i=10,j=["<",">","(",")"],k=function(a,b){return new k.fn.init(a,b)};k.fn=k.prototype,a.extend(k,{consoleLog:function(a){window.console&&window.console.log&&"function"==typeof window.console.log&&window.console.log("wangEditor提示：",a)},getUniqeId:function(){return g+h++},filterXSSForUrl:function(b){var c=!0;return a.each(j,function(a,d){b.indexOf(d)>=0&&(c=!1)}),c},replaceQuotes:function(a){if(""===a)return a;var b=a;return b=b.replace(/(<.*?>)|(')|(")/gm,function(a,b,c,d){return b?b:c?"&#39;":d?"&quot;":void 0})},showTableBorder:function(b){b.find("table").each(function(){var b=a(this),c="wangEditor_table_border_mark",d=b.attr(c);d||(b.attr("border","1"),b.attr("bordercolor","#cccccc"),b.attr("cellpadding","0"),b.attr("cellspacing","0"),b.css({"border-collapse":"collapse"}),b.attr(c,"1"))})}}),a.extend(k,{styleConfig:{fontFamilyOptions:["宋体","黑体","楷体","隶书","幼圆","微软雅黑","Arial","Verdana","Georgia","Times New Roman","Microsoft JhengHei","Trebuchet MS","Courier New","Impact","Comic Sans MS"],colorOptions:{"#880000":"暗红色","#800080":"紫色","#ff0000":"红色","#ff00ff":"鲜粉色","#000080":"深蓝色","#0000ff":"蓝色","#00ffff":"湖蓝色","#008080":"蓝绿色","#008000":"绿色","#808000":"橄榄色","#00ff00":"浅绿色","#ffcc00":"橙黄色","#808080":"灰色","#c0c0c0":"银色","#000000":"黑色","#ffffff":"白色"},fontsizeOptions:{1:"10px",2:"13px",3:"16px",4:"19px",5:"22px",6:"25px",7:"28px"},blockQuoteStyle:"display:block; border-left: 5px solid #d0e5f2; padding:0 0 0 10px; margin:0; line-height:1.4; font-size: 100%;"},htmlTemplates:{elemDeleteBtn:'<a href="#" class="wangEditor-elemDeleteBtn"><i class="icon-wangEditor-cancel"></i></a>',imgResizeBtn:'<div class="wangEditor-imgResize"></div>',editorContainer:'<div class="wangEditor-container"></div>',btnContainer:'<div class="wangEditor-btn-container clearfix"></div>',btnContainerGroup:'<div class="wangEditor-btn-container-group"></div>',btn:'<a class="wangEditor-btn-container-btn wangEditor-btn-container-btn-default" href="#"></a>',btnAngleDown:'<i class="icon-wangEditor-angle-down" style="margin-left:3px;"></i>',tooltip:'<div class="wangEditor-toolTip"></div>',tooltipContent:'<div class="wangEditor-toolTip-content">{title}</div>',modalContainer:'<div class="wangEditor-modal-container"></div>',modal:'<div class="wangEditor-modal">{content}</div>',modalBig:'<div class="wangEditor-modal wangEditor-modal-big">{content}</div>',modalSmall:'<div class="wangEditor-modal wangEditor-modal-small">{content}</div>',modalMini:'<div class="wangEditor-modal wangEditor-modal-mini">{content}</div>',modalHeader:'<div class="wangEditor-modal-header clearfix"><a href="#" commandName="close" class="wangEditor-modal-header-close"><i class="icon-wangEditor-cancel"></i></a><b>{title}</b><div class="wangEditor-modal-header-line"></div></div>',txtContainer:'<div class="wangEditor-textarea-container"></div>',txt:'<div class="wangEditor-textarea" contenteditable="true"><p><br/></p></div>',dropMenu:'<ul class="wangEditor-drop-menu">{content}</ul>',dropPanel:'<div class="wangEditor-drop-panel">{content}</div>',dropPanelBig:'<div class="wangEditor-drop-panel wangEditor-drop-panel-big">{content}</div>',dropPanel_floatItem:'<div class="wangEditor-drop-panel-floatItem">{content}</div>',dropPanel_expression_tab_container:'<div class="clearfix wangEditor-expression-tab-container">{content}</div>',dropPanel_expression_tab:'<div index="{index}" class="wangEditor-expression-tab">{content}</div>',dropPanel_expression_group_container:'<div class="wangEditor-expression-group-container">{content}</div>',dropPanel_expression_group:'<div index="{index}" class="clearfix wangEditor-expression-group">{content}</div>',videoEmbed:'<embed src="{src}" allowFullScreen="true" quality="high" width="{width}" height="{height}" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash"></embed>',codePre:'<pre style="border:1px solid #ccc; background-color: #f5f5f5; padding: 10px; margin: 5px 0px; line-height: 1.4; font-size: 0.8em; font-family: Menlo, Monaco, Consolas; border-radius: 4px; -moz-border-radius: 4px; -webkit-border-radius: 4px;"><code>{content}</code></pre><p><br></p>',codePreWidthHightLight:'<pre><code class="{lang}">{content}</code></pre><p><br></p>'},expressionConfig:{path:"http://wangeditor.github.io/expressions/",fileNames:[1,100],ext:".gif"}}),a.extend(k,{getUploadImgComponentForCrossDomain:function(c){var d=c.uploadUrl,e="wangEditor_uploadImg",f="|.bmp|.jpg|.jpeg|.png|.gif|",g=k.getUniqeId(),h=k.getUniqeId(),i=k.getUniqeId(),j=k.getUniqeId(),l=k.getUniqeId(),m=k.getUniqeId(),n=c.langConfig,o=n.menus.insertImage,p=o.modal,q=p.choose,r=p.title,s=o.alert,t=s.chooseAImage,u=s.fileTypeError,v=s.uploading,w=n.common.upload,x='<form id="'+g+'" method="post" enctype="multipart/form-data" target="'+m+'">   <p>'+q+'：<input type="file" accept="image/*" name="'+e+'" id="'+h+'"/></p>   <p>'+r+'：<input type="text" id="'+i+'" style="width:250px;"/></p>   <p><button id="'+j+'"  type="button" class="wangEditor-modal-btn">'+w+'</button></p>   <span stype="color:red;" id="'+l+'"></span></form><div style="display:none;"><iframe id="'+m+'" name="'+m+'" style="display:none; width:0; height:0;"></iframe></div>',y=a(x);return y.find("#"+j).click(function(e){if(null==d||"string"!=typeof d)return void alert("未配置URL地址，不能上传图片");var j=a("#"+h).val();if(""===j)return void alert(t);var n=j.slice(j.lastIndexOf(".")-j.length);if(n="|"+n.toLowerCase()+"|",-1===f.indexOf(n))return void alert(u);var o=a(this),p=a("#"+l),q=a("#"+g),r=a("#"+i).val(),s=(b.getElementById(m),function(){a("#"+h).val(""),a("#"+i).val("")});window.wangEditor_uploadImgCallback=function(a){k.consoleLog("父页面的wangEditor_uploadImgCallback方法已经开始被调用！");var b,d,f;if(0===a.indexOf("ok|")){if(b=a.split("|"),d=b[1],k.consoleLog("wangEditor_uploadImgCallback方法成功获取到图片url："+d),2===b.length)""===r?c.command(e,"insertImage",d,s):c.command(e,"customeInsertImage",{url:d,title:r},s);else{if(3!==b.length)return void alert("hash格式错误："+a);f=b[2],k.consoleLog("wangEditor_uploadImgCallback方法成功获取到缩略图url："+f),c.command(e,"customeInsertImage",{url:f,link:d,title:r},s)}k.consoleLog("wangEditor_uploadImgCallback方法已经成功插入图片，弹出框也被关闭！")}else alert(a);window.wangEditor_uploadImgCallback=void 0},o.hide(),p.html(v);try{q.attr("action",d),q.submit()}catch(w){alert(w.name+":"+w.message)}finally{o.show(),p.html(""),e.preventDefault()}return!1}),y}}),a.extend(k,{langs:{}}),a.extend(k.langs,{zhs:{common:{insert:"插入",submit:"提交",update:"更新",cancel:"取消",close:"关闭",upload:"上传",unsafeAlert:"输入的内容不安全，请重新输入！",formatError:"输入的内容格式错误，请重新输入！"},menus:{viewSourceCode:{title:"查看源码"},bold:{title:"加粗"},underline:{title:"下划线"},italic:{title:"斜体"},removeFormat:{title:"清除格式"},indent:{title:"增加缩进"},outdent:{title:"减少缩进"},foreColor:{title:"字体颜色"},backgroundColor:{title:"背景色"},strikethrough:{title:"删除线"},blockquote:{title:"引用"},fontFamily:{title:"字体"},fontSize:{title:"字号"},setHead:{title:"标题",content:"正文"},list:{title:"列表",unOrdered:{title:"无序列表"},ordered:{title:"有序列表"}},justify:{title:"对齐",left:{title:"左对齐"},center:{title:"居中"},right:{title:"右对齐"}},createLink:{title:"插入链接",modal:{link:"链接",title:"标题",blank:"新窗口"}},unLink:{title:"取消链接"},insertTable:{title:"插入表格",modal:{rowNum:"行数",colNum:"列数",showFirstRow:"显示首行"}},insertHr:{title:"横线"},insertExpression:{title:"表情"},insertImage:{title:"图片",modal:{insertWeb:"插入网络图片",insertLocal:"上传本地图片",url:"网址",title:"标题",choose:"选择"},alert:{chooseAImage:"请选择图片文件",fileTypeError:"选择的文件不是图片格式",uploading:"上传中..."}},insertVideo:{title:"视频",modal:{url:"地址",width:"宽度",height:"高度"}},insertLocation:{title:"位置",modal:{city:"城市",location:"位置",search:"搜索",clear:"清除标记",loading:"地图加载中...",dynamic:"动态地图"},alert:{cantFindLocation:"没有找到您输入的地址",dynamicOneLocation:"动态地图只能显示一个位置"}},insertCode:{title:"插入代码",modal:{title:"请输入代码 "}},undo:{title:"撤销"},redo:{title:"重复"},fullScreen:{title:"全屏"}}}}),a.extend(k.langs,{en:{common:{insert:"insert",submit:"submit",update:"update",cancel:"cancel",close:"close",upload:"upload",unsafeAlert:"Unsafe content, please input again!",formatError:"Format error, please input again!"},menus:{viewSourceCode:{title:"source code"},bold:{title:"bold"},underline:{title:"under line"},italic:{title:"italic"},removeFormat:{title:"remove format"},indent:{title:"indent"},outdent:{title:"outdent"},foreColor:{title:"font color"},backgroundColor:{title:"background Color"},strikethrough:{title:"delete line"},blockquote:{title:"quote"},fontFamily:{title:"font family"},fontSize:{title:"font size"},setHead:{title:"head",content:"content"},list:{title:"list",unOrdered:{title:"unOrdered"},ordered:{title:"ordered"}},justify:{title:"justify",left:{title:"left"},center:{title:"center"},right:{title:"right"}},createLink:{title:"create link",modal:{link:"link",title:"title",blank:"blank"}},unLink:{title:"unlink"},insertTable:{title:"table",modal:{rowNum:"rows",colNum:"columns",showFirstRow:"show first row"}},insertHr:{title:"hr"},insertExpression:{title:"expressions"},insertImage:{title:"image",modal:{insertWeb:"inset web image",insertLocal:"upload local image",url:"url",title:"title",choose:"choose"},alert:{chooseAImage:"Choose a image file please!",fileTypeError:"Selected file is not a picture format!",uploading:"uploading..."}},insertVideo:{title:"video",modal:{url:"url",width:"width",height:"height"}},insertLocation:{title:"location",modal:{city:"city",location:"location",search:"search",clear:"clear locations",loading:"map loading...",dynamic:"dynamic map"},alert:{cantFindLocation:"Can not find location which you input",dynamicOneLocation:"Keep only one location in dynamic map"}},insertCode:{title:"insert code",modal:{title:"insert code here "}},undo:{title:"undo"},redo:{title:"redo"},fullScreen:{title:"full screen"}}}}),a.extend(k,{commandEnabled:function(a){var c;try{c=b.queryCommandEnabled(a)}catch(d){c=!1}return c},getElemForInsertTable:function(b){return"body"!==b[0].nodeName.toLowerCase()?b.parent().is('div[contenteditable="true"]')?b:b.is('div[contenteditable="true"]')?(0===b.children().length&&b.append(a("<p></p>")),b.children().last()):this.getElemForInsertTable(b.parent()):void 0}}),a.extend(k,{createMenuGroup:function(b,c){if(b instanceof Array!=!1){var d=a(k.htmlTemplates.btnContainerGroup);a.each(b,function(b,e){var f=k.createMenu(e,c);f instanceof Array?a.each(f,function(a,b){d.append(b)}):d.append(f)}),c.insertMenuGroup(d)}},createMenu:function(b,c){if(null!=b&&(b=a.trim(b.toString()),b=c.menus[b])){var d,e,f,g,h,i,j,l=b.title,m=b.type,n=b.cssClass,o=b.style,p=b.command,q=b.commandValue,r=b.hotKey,s=[],t=b.beforeFn,u=b.dropMenu&&b.dropMenu(),v=b.dropPanel&&b.dropPanel(c),w=b.modal&&b.modal(c),x=b.callback,y=a(k.htmlTemplates.btn),z=[y],A=c.$editorContainer;if("string"==typeof p&&(p=a.trim(p)),d=o?'<i class="'+n+'" style="'+o+'"></i>':'<i class="'+n+'"></i>',y.html(d),l&&y.attr("title",l),"btn"===m?("string"==typeof p&&y.attr("commandName",p),"string"==typeof p&&(f=function(a){c.hideModal(),c.command(a,p,q,x),a.stopPropagation()}),"function"==typeof p&&(f=function(a){c.hideModal(),p(a),a.stopPropagation()}),r&&(r=r.toLowerCase(),e=a.trim(r.split("+")[1]),s=r.split("+")[0].split(","),a.each(s,function(b,c){s[b]=a.trim(c)}),g=function(b){var c=!0;return a.each(["ctrl","shift","alt","meta"],function(a,d){-1===s.indexOf(d)||b[d+"Key"]?-1===s.indexOf(d)&&b[d+"Key"]&&(c=!1):c=!1}),c},c.bindEventFor$txt("keydown",function(a){g(a)!==!1&&String.fromCharCode(a.keyCode).toLowerCase()===e&&(a.preventDefault(),y.click())}))):"dropMenu"===m?(y.append(a(k.htmlTemplates.btnAngleDown)),z.unshift(u),h=function(){u.hide()},f=function(a){c.hideModal(),u.css("display","inline-block"),a.preventDefault(),y.focus(),a.stopPropagation()},y.blur(function(a){setTimeout(h,200)}),u.on("click","a[commandValue], a[customCommandName]",function(b){var d=a(this),e=d.attr("commandValue"),f=d.attr("customCommandName");f&&(p=f),c.command(b,p,e,x)}),h()):"dropPanel"===m?(z.unshift(v),i=function(){v.hide()},f=function(a){c.hideModal(),v.css("display","inline-block");var b=A.offset().left,d=A.outerWidth(),e=v.offset().left,f=v.outerWidth(),g=e+f-(b+d);g>0&&v.css("margin-left",0-g),a.preventDefault(),y.focus(),a.stopPropagation()},v.on("click","a[commandValue]",function(b){var d=a(this),e=d.attr("commandValue");c.command(b,p,e,x)}),i()):"modal"===m&&(w.prepend(a(k.htmlTemplates.modalHeader.replace("{title}",l))),c.insertModal(w),f=function(a){c.hideModal(),w.show();var b=c.$editorContainer.outerWidth(),d=w.outerWidth(),e=c.$editorContainer.offset().left,f=w.offset().left;w.css("margin-left",e-f+(b/2-d/2));var g=c.$txtContainer.offset().top,h=w.offset().top;w.css("margin-top",g-h+5),a.preventDefault(),a.stopPropagation()},w.find("[commandName=close]").click(function(a){w.css({"margin-left":0,"margin-top":0}).hide(),a.preventDefault()})),y.click(function(a){t&&"function"==typeof t&&t(c),f&&"function"==typeof f&&f(a)}),l){y.attr("title","");var B,C,D=a(k.htmlTemplates.tooltip),E=a(k.htmlTemplates.tooltipContent.replace("{title}",l));D.append(E),z.unshift(D),j=function(){D.css("display","inline-block")},y.mouseenter(function(){C||(C=D.css("margin-left")),"0px"===C&&(C=0-(D.outerWidth()/2-y.outerWidth()/2)+"px",D.css("margin-left",C)),B=setTimeout(j,200)}).mouseleave(function(){clearTimeout(B),D.hide()})}return z}}}),a.extend(k.fn,{init:function(b,c){function d(a){p.saveSelection(),p.updateMenuStyle(),a&&"focus"===a.type&&p.$txt.off("focus",d)}var g=c.onchange,h=c.menuConfig,i=c.expressions,j=c.uploadImgComponent,l=c.uploadUrl,m=c.pasteUrl,n=c.lang,o=c.filterJs,p=this,q=b.height(),r=b.css("max-height"),s=a.trim(b.val()),t=b.attr("id");return t||(t=k.getUniqeId()),p.id=t,p.$editorContainer=a(k.htmlTemplates.editorContainer),p.$btnContainer=a(k.htmlTemplates.btnContainer),p.$modalContainer=a(k.htmlTemplates.modalContainer),p.$txtContainer=a(k.htmlTemplates.txtContainer),p.$txt=a(k.htmlTemplates.txt),p.$textarea=b,p.$elemDeleteBtn=a(k.htmlTemplates.elemDeleteBtn),p.$imgResizeBtn=a(k.htmlTemplates.imgResizeBtn),p.$txtContainer.append(p.$txt),p.$editorContainer.append(p.$btnContainer).append(p.$txtContainer).append(p.$elemDeleteBtn).append(p.$imgResizeBtn),a("body").append(p.$modalContainer),80>=q&&(q=80),(parseInt(r)<=q||!r)&&(r="none"),a(function(){var a=q-p.$btnContainer.outerHeight();a-=2,0>=a&&(a=q-32),"string"==typeof r&&"none"!==r?p.$txtContainer.css("max-height",r):p.$txtContainer.height(a),p.$txt.css("min-height",a-10+"px")}),b.prop("readonly")&&p.$txt.attr("contenteditable",!1),g&&"function"==typeof g&&(p.onchange=g),i&&i.length&&i.length>0&&(p.expressions=i),p.initLang(n),null==o&&(o=!0),p.filterJs=o,l&&"string"==typeof l&&(p.uploadUrl=l,p.uploadImgComponent=k.getUploadImgComponentForCrossDomain(p)),j&&(p.uploadImgComponent=j),p.initMenus(),p.initMenuConfig(),h&&h instanceof Array==!0&&h[0]instanceof Array==!0&&(p.editorMenuConfig=h),p.menuGroupLength=0,a.each(p.editorMenuConfig,function(a,b){k.createMenuGroup(b,p)}),1===p.menuGroupLength&&p.$btnContainer.children().first().css("border-right","0"),p.$txt.on("focus",d).on("mousedown",function(){p.$txt.on("mouseleave",function(){p.$txt.off("mouseleave"),setTimeout(d,100)})}).on("click keyup",function(a){var b=!1,c=[33,34,35,36,37,38,39,40,13,8,46,9,65];b="click"===a.type||"keyup"===a.type&&-1!==c.indexOf(a.keyCode)||a.ctrlKey||a.shiftKey||a.metaKey,b&&(d(),"click"===a.type&&p.$txt.off("mouseleave"))}).on("focus blur",function(){p.addCommandRecord()}).on("keyup",function(a){13===a.keyCode&&p.addCommandRecord()}).on("keydown",function(a){9===a.keyCode&&p.command(a,"insertHTML","&nbsp;&nbsp;&nbsp;&nbsp;")}),e||f?p.initDeleteBtn("table"):p.initDeleteBtn("img,table"),e||f||p.initImgResizeBtn("img"),p.initLang(n),p.bindPaste(m),p.$txtContainer.click(function(){p.hideModal()}),p.$btnContainer.click(function(){p.hideModal()}),p._initCommandRecord(),p.latestHtml=p.html(),p.$txt.blur(function(){p.change()}),s&&(p.$txt.html(s),p.change()),p.$txt.focus(),p}}),a.extend(k.fn,{insertMenuGroup:function(a){this.$btnContainer.append(a),this.menuGroupLength+=1},insertModal:function(a){this.$modalContainer.append(a)},bindEventFor$txt:function(a,b){this.$txt.on(a,b)},html:function(a){return null==a?this.$txt.html():void("string"==typeof a&&(this.$txt.html(a),this.change()))},text:function(){return this.$txt.text()},append:function(b){null!=b&&("string"==typeof b&&(b="<div>"+b+"</div>",this.$txt.append(a(b))),b instanceof a&&this.$txt.append(b),this.change())},textareaVal:function(a){return a||""===a?void this.$textarea.val(a):this.$textarea.val()},hideModal:function(){this.$modalContainer.find(".wangEditor-modal:visible").css({"margin-top":0,"margin-left":0}).hide(),this.$btnContainer.find(".wangEditor-drop-panel:visible").hide(),this.$btnContainer.find(".wangEditor-drop-menu:visible").hide()},getEditorContainer:function(){return this.$editorContainer},blur:function(){this.$txt.blur()},focus:function(){this.$txt.focus()},hide:function(){this.$editorContainer.hide()},show:function(){this.$editorContainer.show()}}),a.extend(k.fn,{initDeleteBtn:function(b){function c(){var a=f.css("display");""!==a&&"none"!==a&&f.hide(),d=""}var d,e=this,f=e.$elemDeleteBtn;e.$txt.on("click",b,function(b){var g=a(this),h=g.data("deleteBtnId"),i=k.getUniqeId();if(h&&d===h)return void b.stopPropagation();h||(g.data("deleteBtnId",i),h=i),d=h;var j=e.$btnContainer.position().top,l=e.$btnContainer.outerHeight(),m=g.position(),n=m.top,o=m.left,p=f.width(),q=f.height();j+l>=n||(f.css({top:n-q/2+"px",left:o-p/2+"px"}),f.show(),e.$txtContainer.off("scroll.deleteBtn"),e.$txtContainer.on("scroll.deleteBtn",c),f.off(),f.click(function(a){e.command(a,"delete$elem",g,c)}),b.stopPropagation(),b.preventDefault())}),e.$txt.on("click keyup",function(a){c()})}}),a.extend(k.fn,{initImgResizeBtn:function(b){function d(){if(!h){var a=g.css("display");""!==a&&"none"!==a&&g.hide(),e=""}}var e,f=this,g=f.$imgResizeBtn,h=!1;f.$txt.on("click",b,function(b){var i=a(this),j=i.data("imgResizeId"),l=k.getUniqeId();if(j&&e===j)return void b.stopPropagation();j||(i.data("imgResizeId",l),j=l),e=j;var m,n,o,p,q=i.position(),r=q.top,s=q.left,t=i.outerWidth(),u=i.outerHeight(),v=f.$txtContainer.position(),w=v.top,x=v.left,y=f.$txtContainer.outerWidth(),z=f.$txtContainer.outerHeight(),A=g.outerWidth(),B=g.outerHeight(),C=f.$editorContainer.position(),D=C.left,E=C.top;r+u>w+z||s+t>x+y||(g.css({top:r+u-B+"px",left:s+t-A+"px"}),g.show(),f.$txtContainer.off("scroll.resizebtn"),f.$txtContainer.on("scroll.resizebtn",d),g.off(),g.on("mousedown",function(a){h=!0;var b=g.position();o=a.pageX-D-b.left,p=a.pageY-E-b.top,m=g.outerWidth(),n=g.outerHeight()}),c.off("mousemove.resizeBtn mouseup.resizeBtn"),c.on("mousemove.resizeBtn",function(a){if(h){var b=a.pageX-D-o,c=a.pageY-E-p;g.css({top:c,left:b});var d=g.position(),e=d.left,f=d.top;i.css({width:e+m-s,height:f+n-r}),a.preventDefault()}}).on("mouseup.resizeBtn",function(a){h=!1}),b.stopPropagation(),b.preventDefault())}),f.$txt.on("click keyup blur",function(a){"blur"===a.type?setTimeout(d,100):d()})}}),a.extend(k.fn,{initLang:function(b){var c=this,d=k.langs,e="zhs",f=d[e];"object"==typeof b?(null===b&&(b={}),a.extend(!0,f,b)):"string"==typeof b&&b in d?f=d[b]:b=e,c.defaultLang=e,c.lang=b,c.langConfig=f}}),a.extend(k.fn,{bindPaste:function(b){var c=this,d=c.$txt;d.on("paste",function(d){var e=d.clipboardData||d.originalEvent.clipboardData,f=e.items;a.each(f,function(a,d){if(d.type.indexOf("image")>-1){var e=d.getAsFile(),f=new FileReader;f.onload=function(a){var d,e,f,g=a.target.result||this.result;b?(e=new XMLHttpRequest,f=new FormData,e.open("POST",b,!0),e.onload=function(){d=e.responseText,c.command(a,"insertImage",d)},f.append("wangEditorPasteFile",g),e.send(f)):(d=g,c.command(a,"insertImage",d))},f.readAsDataURL(e)}})})}}),k.fn.init.prototype=k.fn,a.extend(k.fn,{initMenus:function(){var c=this,d=c.langConfig.common,e=c.langConfig.menus;c.menus={bold:{title:e.bold.title,type:"btn",hotKey:"ctrl + b",beforeFn:function(a){},cssClass:"icon-wangEditor-bold",command:"bold",callback:function(a){}},underline:{title:e.underline.title,type:"btn",hotKey:"ctrl + u",cssClass:"icon-wangEditor-underline",command:"underline "},italic:{title:e.italic.title,type:"btn",hotKey:"ctrl + i",cssClass:"icon-wangEditor-italic",command:"italic "},removeFormat:{title:e.removeFormat.title,type:"btn",cssClass:"icon-wangEditor-eraser",command:"RemoveFormat "},unLink:{title:e.unLink.title,type:"btn",cssClass:"icon-wangEditor-unlink",command:"unLink "},insertHr:{title:e.insertHr.title,type:"btn",cssClass:"icon-wangEditor-minus",command:"InsertHorizontalRule"},strikethrough:{title:e.strikethrough.title,type:"btn",cssClass:"icon-wangEditor-strikethrough",command:"StrikeThrough"},blockquote:{title:e.blockquote.title,type:"btn",cssClass:"icon-wangEditor-quotes-left",command:"formatBlock",commandValue:"blockquote",callback:function(b){var c=b.$txt.find("blockquote"),d="hadStyle";a.each(c,function(b,c){var e,f,g=a(c),h=g.data(d);h||(e=g.next(),f=g.attr("style")||"",f=k.styleConfig.blockQuoteStyle+f,g.attr("style",f),g.data(d,!0),"length"in e&&0===e.length&&g.after("<p><br></p>"))})}},justify:{title:e.justify.title,type:"dropMenu",cssClass:"icon-wangEditor-align-left",dropMenu:function(){var b,c=[],d='<li><a href="#" customCommandName="${command}">${txt}</a></li>',f=[{commandName:"JustifyLeft",txt:'<i class="icon-wangEditor-align-left"> '+e.justify.left.title+"</i>"},{commandName:"JustifyCenter",txt:'<i class="icon-wangEditor-align-center"> '+e.justify.center.title+"</i>"},{commandName:"JustifyRight",txt:'<i class="icon-wangEditor-align-right"> '+e.justify.right.title+"</i>"}];return a.each(f,function(a,b){c.push(d.replace("${command}",b.commandName).replace("${txt}",b.txt))}),b=a(k.htmlTemplates.dropMenu.replace("{content}",c.join("")))}},list:{title:e.list.title,type:"dropMenu",cssClass:"icon-wangEditor-list-bullet",dropMenu:function(){var b,c=[],d='<li><a href="#" customCommandName="${command}">${txt}</a></li>',f=[{commandName:"InsertUnorderedList",txt:'<i class="icon-wangEditor-list-bullet"> '+e.list.unOrdered.title+"</i>"},{commandName:"InsertOrderedList",txt:'<i class="icon-wangEditor-list-numbered"> '+e.list.ordered.title+"</i>"}];return a.each(f,function(a,b){c.push(d.replace("${command}",b.commandName).replace("${txt}",b.txt))}),b=a(k.htmlTemplates.dropMenu.replace("{content}",c.join("")))}},fontFamily:{title:e.fontFamily.title,type:"dropMenu",cssClass:"icon-wangEditor-font2",command:"fontName ",dropMenu:function(){var b,c=[],d='<li><a href="#" commandValue="${value}" style="font-family:${family};">${txt}</a></li>';return a.each(k.styleConfig.fontFamilyOptions,function(a,b){c.push(d.replace("${value}",b).replace("${family}",b).replace("${txt}",b))}),b=a(k.htmlTemplates.dropMenu.replace("{content}",c.join("")))},callback:function(a){}},fontSize:{title:e.fontSize.title,type:"dropMenu",cssClass:"icon-wangEditor-text-height",command:"fontSize",dropMenu:function(){var b,c=[],d='<li><a href="#" commandValue="${value}" style="font-size:${fontsize};">${txt}</a></li>';return a.each(k.styleConfig.fontsizeOptions,function(a,b){c.push(d.replace("${value}",a).replace("${fontsize}",b).replace("${txt}",b))}),b=a(k.htmlTemplates.dropMenu.replace("{content}",c.join("")))}},setHead:{title:e.setHead.title,type:"dropMenu",cssClass:"icon-wangEditor-header",command:"formatBlock ",dropMenu:function(){var b=e.setHead.title,c=e.setHead.content,d='<li><a href="#" commandValue="<h1>"><h1>'+b+'1</h1></a></li><li><a href="#" commandValue="<h2>"><h2>'+b+'2</h2></a></li><li><a href="#" commandValue="<h3>"><h3>'+b+'3</h3></a></li><li><a href="#" commandValue="<h4>"><h4>'+b+'4</h4></a></li><li><a href="#" commandValue="<p>">'+c+"</a></li>";return a(k.htmlTemplates.dropMenu.replace("{content}",d))}},foreColor:{title:e.foreColor.title,type:"dropPanel",cssClass:"icon-wangEditor-pencil",command:"foreColor",dropPanel:function(){var b,c=[],d='<a href="#" commandValue="${value}" style="background-color:${color};" title="${txt}" class="forColorItem">&nbsp;</a>';return a.each(k.styleConfig.colorOptions,function(a,b){var e=d.replace("${value}",a).replace("${color}",a).replace("${txt}",b);c.push(k.htmlTemplates.dropPanel_floatItem.replace("{content}",e))}),b=a(k.htmlTemplates.dropPanel.replace("{content}",c.join("")))}},backgroundColor:{title:e.backgroundColor.title,type:"dropPanel",cssClass:"icon-wangEditor-brush",command:"backColor ",dropPanel:function(){var b,c=[],d='<a href="#" commandValue="${value}" style="background-color:${color};" title="${txt}" class="forColorItem">&nbsp;</a>';return a.each(k.styleConfig.colorOptions,function(a,b){var e=d.replace("${value}",a).replace("${color}",a).replace("${txt}",b);c.push(k.htmlTemplates.dropPanel_floatItem.replace("{content}",e))}),b=a(k.htmlTemplates.dropPanel.replace("{content}",c.join("")))}},createLink:{title:e.createLink.title,type:"modal",cssClass:"icon-wangEditor-link",modal:function(b){var c=k.getUniqeId(),f=k.getUniqeId(),g=k.getUniqeId(),h=k.getUniqeId(),i=e.createLink.modal,j=i.link,l=i.title,m=i.blank,n=d.insert,o=d.unsafeAlert,p="<p>"+j+'：<input id="'+c+'" type="text" style="width:300px;"  placeholder="http://"/></p><p>'+l+'：<input id="'+f+'" type="text" style="width:300px;"/></p><p>'+m+'：<input id="'+g+'" type="checkbox" checked="checked"/></p><p><button id="'+h+'" type="button" class="wangEditor-modal-btn">'+n+"</button></p>",q=a(k.htmlTemplates.modalSmall.replace("{content}",p));return q.find("#"+h).click(function(d){var e,h=a.trim(a("#"+c).val()),i=a.trim(a("#"+f).val()),j=a("#"+g).is(":checked"),l=b.hasSelectionContent(),m=function(){a("#"+c).val(""),a("#"+f).val("")};if(""!==h){if(k.filterXSSForUrl(h)===!1)return void alert(o);l===!1?(""===i&&(i=h),e='<a href="'+h+'" target="_blank">'+i+"</a>",b.command(d,"insertHTML",e,m)):""!==i||j?b.command(d,"customCreateLink",{url:h,title:i,isBlank:j},m):b.command(d,"createLink",h,m)}}),q}},insertExpression:{title:e.insertExpression.title,type:"dropPanel",command:"insertImage",cssClass:"icon-wangEditor-happy",dropPanel:function(b){var c=k.expressionConfig,d=c.path,e=c.fileNames,f=(e[0],e[1]),g=c.ext,h=[],i=1;if(b.expressions)h=b.expressions;else for(;f>=i;i++)h.push(d+i+g);var j,l,m,n='<a href="#" commandValue="${value}">   <img src="${src}" expression="1"/></a>',o=[],p=0,q=[],r=[];return"string"==typeof h[0]?(a.each(h,function(a,b){var c=n.replace("${value}",b).replace("${src}",b);o.push(k.htmlTemplates.dropPanel_floatItem.replace("{content}",c))}),j=a(k.htmlTemplates.dropPanelBig.replace("{content}",o.join("")))):(a.each(h,function(b,c){p+=1;var d,e,f=c.title,g=c.items,h=[];d=k.htmlTemplates.dropPanel_expression_tab.replace("{content}",f).replace("{index}",p),q.push(d),a.each(g,function(a,b){var c=n.replace("${value}",b).replace("${src}",b);h.push(k.htmlTemplates.dropPanel_floatItem.replace("{content}",c))}),e=k.htmlTemplates.dropPanel_expression_group.replace("{content}",h.join("")).replace("{index}",p),r.push(e)}),l=k.htmlTemplates.dropPanel_expression_tab_container.replace("{content}",q.join("")),m=k.htmlTemplates.dropPanel_expression_group_container.replace("{content}",r.join("")),j=a(k.htmlTemplates.dropPanelBig.replace("{content}",l+m)),a(function(){function b(a){var b=a.attr("index");d.removeClass("selected"),a.addClass("selected"),f.hide(),e.find("[index="+b+"]").show()}var c=a(".wangEditor-expression-tab-container"),d=c.children(),e=a(".wangEditor-expression-group-container"),f=e.children();b(d.first()),d.click(function(c){b(a(this)),c.stopPropagation()})})),j}},insertVideo:{title:e.insertVideo.title,type:"modal",cssClass:"icon-wangEditor-play",modal:function(b){var c=k.getUniqeId(),f=k.getUniqeId(),g=k.getUniqeId(),h=k.getUniqeId(),i=480,j=400,l=e.insertVideo.modal,m=l.url,n=l.width,o=l.height,p=d.insert,q=d.unsafeAlert,r=d.formatError,s="<p>"+m+'：<input id="'+c+'" type="text" style="width:300px;"  placeholder="http://"/></p><p>'+n+'：<input id="'+f+'" type="text" style="width:50px" value="'+i+'"/> px（像素）</p><p>'+o+'：<input id="'+g+'" type="text" style="width:50px" value="'+j+'"/> px（像素） </p><p><button id="'+h+'" class="wangEditor-modal-btn" type="button">'+p+"</button></p>",t=a(k.htmlTemplates.modalSmall.replace("{content}",s));return t.find("#"+h).click(function(d){var e,h=a.trim(a("#"+c).val()),l=+a("#"+f).val(),m=+a("#"+g).val(),n=function(){a("#"+c).val(""),a("#"+f).val(i),a("#"+g).val(j)};return k.filterXSSForUrl(h)===!1?void alert(q):0!==h.indexOf("http://")&&0!==h.indexOf("https://")||-1===h.indexOf(".swf")?void alert(r):(isNaN(l)&&(l=i),isNaN(m)&&(m=j),e=k.htmlTemplates.videoEmbed.replace("{src}",h).replace("{width}",l).replace("{height}",m),void b.command(d,"insertHTML",e,n))}),t}},insertTable:{title:e.insertTable.title,type:"modal",cssClass:"icon-wangEditor-table",modal:function(b){var c=k.getUniqeId(),f=k.getUniqeId(),g=k.getUniqeId(),h=k.getUniqeId(),i=e.insertTable.modal,j=i.rowNum,l=i.colNum,m=i.showFirstRow,n=d.insert,o="<p>"+j+'：<input id="'+c+'" type="text" value="3"/></p><p>'+l+'：<input id="'+f+'" type="text" value="5"/></p><p>'+m+'：<input id="'+g+'" type="checkbox" checked="checked"/></p><p><button id="'+h+'"  type="button" class="wangEditor-modal-btn">'+n+"</button></p>",p=a(k.htmlTemplates.modalSmall.replace("{content}",o));
return p.find("#"+h).click(function(d){var e,h,i,j=a("#"+c).val(),k=""===j||isNaN(+j)?3:j,l=a("#"+f).val(),m=""===l||isNaN(+l)?5:l,n=a("#"+g).is(":checked"),o=function(){a("#"+c).val(""),a("#"+f).val("")},p="",q='<table border="1" bordercolor="#cccccc" cellpadding="0" cellspacing="0" style="border-collapse:collapse;" > ${content} </table>',r=[],s='<tr style="font-weight:bold;background-color:#f1f1f1;">${content}</tr>',t="<tr>${content}</tr>",u='<td style="min-width:100px; padding:5px;">&nbsp;</td>',v='<td style="padding:5px;">&nbsp;</td>';for(e=0;k>e;e++){for(i=[],h=0;m>h;h++)0===e?i.push(u):i.push(v);0===e&&n?r.push(s.replace("${content}",i.join(""))):r.push(t.replace("${content}",i.join("")))}p=q.replace("${content}",r.join("")),b.command(d,"insertHTML",p,o)}),p}},insertImage:{title:e.insertImage.title,type:"modal",cssClass:"icon-wangEditor-picture",modal:function(c){var f=c.uploadImgComponent,g=k.getUniqeId(),h=k.getUniqeId(),i=k.getUniqeId(),j=k.getUniqeId(),l=k.getUniqeId(),m=k.getUniqeId(),n=e.insertImage.modal,o=n.insertWeb,p=n.insertLocal,q=n.url,r=n.title,s=d.insert,t=d.unsafeAlert,u='<p>   <span id="'+h+'">'+o+'</span>    <a href="#" id="'+i+'"></a></p><div id="'+g+'">   <p>'+q+'：<input id="'+j+'" type="text" style="width:300px;" placeholder="http://"/></p>   <p>'+r+'：<input id="'+l+'" type="text" style="width:300px;"/></p><p><button id="'+m+'" type="button" class="wangEditor-modal-btn">'+s+"</button></p></div>",v=a(k.htmlTemplates.modalSmall.replace("{content}",u));return a(function(){function b(){f.show(),d.hide(),e.text(p),j.text(o)}function c(){f.hide(),d.show(),e.text(o),j.text(p)}var d=a("#"+g),e=a("#"+h),j=a("#"+i);f&&(v.append(f),b()),j.click(function(a){var d=j.text();d===p?b():c(),a.preventDefault()})}),v.find("#"+m).click(function(d){var e=a.trim(a("#"+j).val()),f=a.trim(a("#"+l).val()),g=function(){a("#"+j).val(""),a("#"+l).val("")};if(e||(e=a.trim(b.getElementById(j).value),f=a.trim(b.getElementById(l).value)),""!==e){if(k.filterXSSForUrl(e)===!1)return void alert(t);""===f?c.command(d,"insertImage",e,g):c.command(d,"customeInsertImage",{url:e,title:f},g)}}),v}},insertCode:{title:e.insertCode.title,type:"modal",cssClass:"icon-wangEditor-terminal",modal:function(b){var c,d=k.getUniqeId(),f=k.getUniqeId(),g=k.getUniqeId(),h=e.insertCode.modal,i=h.title,j="<p>"+i+'：{selectLangs}</p><div><textarea id="'+d+'" style="width:100%; height:100px;"></textarea></div><button id="'+g+'"  type="button" class="wangEditor-modal-btn">插入</button>',l='<select id="'+f+'">{content}</select>',m=!1,n=window.hljs,o=n&&n.listLanguages,p="function"==typeof o&&o(),q="";return p&&"object"==typeof p&&p.length?(a.each(p,function(a,b){q=q+'<option value="'+b+'">'+b+"</option>"}),l=l.replace("{content}",q),j=j.replace("{selectLangs}",l),m=!0):j=j.replace("{selectLangs}",""),c=a(k.htmlTemplates.modal.replace("{content}",j)),c.find("#"+g).click(function(c){var e,g=a.trim(a("#"+d).val()),h=function(){a("#"+d).val(""),m&&a("pre code").each(function(a,b){n.highlightBlock(b)})};m&&(e=a("#"+f).val()),g&&""!==g&&(g=g.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;"),g=m?k.htmlTemplates.codePreWidthHightLight.replace("{lang}",e).replace("{content}",g):k.htmlTemplates.codePre.replace("{content}",g),b.command(c,"insertHTML",g,h))}),c}},insertLocation:{title:e.insertLocation.title,type:"modal",cssClass:"icon-wangEditor-location",modal:function(c){var f,g=k.getUniqeId(),h=k.getUniqeId(),i=k.getUniqeId(),j=k.getUniqeId(),l=k.getUniqeId(),m=k.getUniqeId(),n=k.getUniqeId(),o=e.insertLocation.modal,p=o.city,q=o.location,r=o.search,s=o.clear,t=o.loading,u=o.dynamic,v=d.insert,w=e.insertLocation.alert,x=w.cantFindLocation,y=w.dynamicOneLocation,z=p+'：<input type="text" id="'+g+'" style="width:60px;"/> '+q+'：<input type="text" id="'+h+'"> <button class="wangEditor-modal-btn" id="'+i+'"  type="button">'+r+'</button> <button class="wangEditor-modal-btn" id="'+j+'"  type="button">'+s+'</button> <div id="'+l+'" style="width:100%; height:220px; border:1px solid #ccc; margin:10px 0px;">'+t+'</div> <button class="wangEditor-modal-btn" id="'+m+'"  type="button">'+v+'</button> <input type="checkbox" id="'+n+'"/>'+u,A=a(k.htmlTemplates.modal.replace("{content}",z)),B=[];return window.baiduMapCallBack=function(){function b(b){var c=b.name;f.setCenter(c),a("#"+g).val(c)}f=new BMap.Map(l),f.centerAndZoom(new BMap.Point(116.404,39.915),11),f.addControl(new BMap.MapTypeControl),f.setCurrentCity("北京"),f.enableScrollWheelZoom(!0);var c=new BMap.LocalCity;c.get(b),f.addEventListener("click",function(a){var b=new BMap.Marker(new BMap.Point(a.point.lng,a.point.lat));f.addOverlay(b),b.enableDragging(),B.push(b)})},a(function(){var a="TVhjYjq1ICT2qqL5LdS8mwas",c=b.createElement("script");c.type="text/javascript",c.src="http://api.map.baidu.com/api?v=2.0&ak="+a+"&callback=baiduMapCallBack",b.body.appendChild(c)}),A.find("#"+i).click(function(b){var c,d,e=a.trim(a("#"+g).val()),i=a.trim(a("#"+h).val());""!==e&&(i&&""!==i||f.centerAndZoom(e,11),i&&""!==i&&(c=new BMap.Geocoder,c.getPoint(i,function(a){a?(f.centerAndZoom(a,13),d=new BMap.Marker(a),f.addOverlay(d),d.enableDragging(),B.push(d)):(alert(x),f.centerAndZoom(e,11))},e)))}),A.find("#"+j).click(function(a){f.clearOverlays(),B=[]}),A.find("#"+m).click(function(b){var d,e,g,h=a("#"+n).is(":checked"),i=f.getCenter(),j=i.lng,k=i.lat,l=f.getZoom(),m=f.getSize(),o=m.width,p=m.height;if(e=h?"http://ueditor.baidu.com/ueditor/dialogs/map/show.html#":"http://api.map.baidu.com/staticimage?",e=e+"center="+j+","+k+"&zoom="+l+"&width="+o+"&height="+p,B.length>0&&(e+="&markers=",a.each(B,function(a,b){d=b.getPosition(),a>0&&(e+="|"),e=e+d.lng+","+d.lat})),h){if(B.length>1)return void alert(y);e+="&markerStyles=l,A",g='<iframe class="ueditor_baidumap" src="{src}" frameborder="0" width="'+o+'" height="'+p+'"></iframe>',g=g.replace("{src}",e),c.command(b,"insertHTML",g)}else c.command(b,"insertImage",e)}),A}},undo:{title:e.undo.title,type:"btn",hotKey:"ctrl+z",cssClass:"icon-wangEditor-ccw",command:"commonUndo",callback:function(a){a.blur()}},redo:{title:e.redo.title,type:"btn",cssClass:"icon-wangEditor-cw",command:"commonRedo",callback:function(a){a.blur()}},viewSourceCode:{title:e.viewSourceCode.title,type:"modal",cssClass:"icon-wangEditor-code",modal:function(b){var c=k.getUniqeId(),e=k.getUniqeId(),f=d.update,g='<div><textarea style="width:100%; height:200px;" id="'+c+'"></textarea></div><button id="'+e+'" class="wangEditor-modal-btn"  type="button">'+f+"</button>",h=a(k.htmlTemplates.modalBig.replace("{content}",g));return a(function(){b.$btnContainer.find(".icon-wangEditor-code").parent().click(function(d){var e=b.html();e=k.replaceQuotes(e),a("#"+c).val(e)})}),h.find("#"+e).click(function(d){var e=a("#"+c).val();b.filterJs&&(e=e.replace(/<script[\s\S]*?<\/script>/gi,"")),""===a.trim(e)&&(e="<p><br></p>"),b.command(d,"replaceSourceCode",e)}),h}},fullScreen:{title:e.fullScreen.title,type:"btn",cssClass:"icon-wangEditor-enlarge2",command:"fullScreen"}}}}),a.extend(k.fn,{initMenuConfig:function(){this.editorMenuConfig=[["viewSourceCode"],["bold","underline","italic","foreColor","backgroundColor","strikethrough","removeFormat"],["blockquote","fontFamily","fontSize","setHead","list","justify"],["createLink","unLink","insertTable","insertExpression"],["insertImage","insertVideo","insertLocation","insertCode"],["undo","redo","fullScreen"]]}}),a.extend(k.fn,{getCommandBtns:function(){return null==this.$btnsWithCommandName&&(this.$btnsWithCommandName=this.$btnContainer.find("a[commandName]")),this.$btnsWithCommandName},updateMenuStyle:function(){var c=this.getCommandBtns();c.length<=0||c.each(function(){var c=a(this),d=a.trim(c.attr("commandName")).toLowerCase();"insertunorderedlist"!==d&&"insertorderedlist"!==d&&(k.commandEnabled(d)&&b.queryCommandState(d)?c.addClass("wangEditor-btn-container-btn-selected"):c.removeClass("wangEditor-btn-container-btn-selected"))})}}),a.extend(k.fn,{parentElemForCurrentRange:function(a){return a?void(this.parentElem=a):this.parentElem},currentRange:function(a){return a?void(this.currentRangeData=a):this.currentRangeData},saveSelection:function(c){var e,f,g=this,h=g.$txt[0];d?c?f=c.commonAncestorContainer:(e=b.getSelection(),e.getRangeAt&&e.rangeCount&&(c=b.getSelection().getRangeAt(0),f=c.commonAncestorContainer)):(c=b.selection.createRange(),f="undefined"==typeof c.parentElement?null:c.parentElement()),f&&(a.contains(h,f)||h===f)&&(g.parentElemForCurrentRange(f),g.currentRange(c))},restoreSelection:function(){var a,c,e=this,f=e.currentRange();f&&(d?(a=b.getSelection(),a.removeAllRanges(),a.addRange(f)):(c=b.selection.createRange(),c.setEndPoint("EndToEnd",f),0===f.text.length?c.collapse(!1):c.setEndPoint("StartToStart",f),c.select()))},initSelection:function(){var a,c=this,e=c.$txt.get(0);c.currentRange()||(d&&(a=b.createRange(),a.setStart(e,0),a.setEnd(e,0)),a&&c.saveSelection(a))},hasSelectionContent:function(){var a=this.currentRange();return d&&a.endContainer===a.startContainer&&a.endOffset===a.startOffset?!1:!0}}),a.extend(k.fn,{change:function(){var a=this,b=a.html();(b.length!==a.latestHtml.length||b!==a.latestHtml)&&(b=k.replaceQuotes(b),k.showTableBorder(this.$txt),a.textareaVal(b),a.onchange&&a.onchange(b),a.latestHtml=b)}}),a.extend(k.fn,{_initCommandRecord:function(){var a=this,b=a.html();a.commandRecords=[],a.commandRecords.push(b),a.commandRecordCursor=0},addCommandRecord:function(){var a=this,b=a.commandRecords.length,c=a.html();b>0&&c===a.commandRecords[a.commandRecordCursor]||(a.commandRecords.push(c),b>=i&&a.commandRecords.shift(),b=a.commandRecords.length,a.commandRecordCursor=b-1)},undo:function(){this.commandRecordCursor>0&&(this.commandRecordCursor=this.commandRecordCursor-1,this.html(this.commandRecords[this.commandRecordCursor]))},redo:function(){var a=this,b=a.commandRecords.length;a.commandRecordCursor<b-1&&(a.commandRecordCursor=a.commandRecordCursor+1,a.html(a.commandRecords[a.commandRecordCursor]))}}),a.extend(k.fn,{commandHooks:{insertHTML:function(b,c){var d,e=this.currentRange(),f=this.parentElemForCurrentRange();e&&(d=k.getElemForInsertTable(a(f)),0===d.next().length&&(c+="<p><br/></p>"),d.after(a(c)))},customCreateLink:function(a,c){var d,e,f=c.url,g=c.title,h=c.isBlank,i=k.getUniqeId();d=this.$txt.find("a"),d.length>0&&d.attr(i,"1"),b.execCommand("createLink",!1,f),e=this.$txt.find("a").not("["+i+"]"),g&&e.attr("title",g),h&&e.attr("target","_blank"),d.length>0&&d.removeAttr(i)},customeInsertImage:function(a,c){var d,e,f=c.url,g=c.title,h=c.link,i=k.getUniqeId();d=this.$txt.find("img"),d.length>0&&d.attr(i,"1"),b.execCommand("insertImage",!1,f),e=this.$txt.find("img").not("["+i+"]"),e.attr("title",g),e.attr("alt",g),h&&"string"==typeof h&&e.wrap('<a href="'+h+'" target="_blank"></a>'),d.length>0&&d.removeAttr(i)},delete$elem:function(a,b){b.remove()},commonUndo:function(a,b){this.undo(a,b)},commonRedo:function(a,b){this.redo(a,b)},replaceSourceCode:function(a,b){this.html(b)},fullScreen:function(a,b){var c=this.$txtContainer,d=this.getEditorContainer(),e=d.css("position"),f=c.css("max-height"),g="icon-wangEditor-enlarge2",h="icon-wangEditor-shrink2",i=d.find("."+g),j=d.find("."+h);i.length?i.removeClass(g).addClass(h):j.length&&j.removeClass(h).addClass(g),"fixed"!==e?(this._txtContainerHeight=c.height(),c.css({height:"90%"}),d.css({position:"fixed",top:25,left:20,right:20,bottom:20,"z-index":1e3,"-webkit-box-shadow":"0 0 30px #999","-moz-box-shadow":"0 0 30px #999","box-shadow":"0 0 30px #999"}),c.css("max-height","none")):(c.height(this._txtContainerHeight),d.css({position:"relative",top:0,left:0,right:0,bottom:0,"z-index":0,"-webkit-box-shadow":"0 0 0 #CCC","-moz-box-shadow":"0 0 0 #CCC","box-shadow":"0 0 0 #CCC"}),c.css("max-height",f))}}}),a.extend(k.fn,{command:function(a,c,d,e){if(this.currentRange()){var f;this.restoreSelection(),k.commandEnabled(c)===!0?b.execCommand(c,!1,d):(f=this.commandHooks[c],f?f.call(this,c,d):k.consoleLog("不支持“"+c+"”命令，请检查。")),this.saveSelection(),e&&"function"==typeof e&&e(this),this.updateMenuStyle(),this.addCommandRecord(),this.change()}else alert("未选中编辑区，无法执行操作");this.hideModal(),a&&a.preventDefault()}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},Array.prototype.lastIndexOf=function(a){var b=this.length;for(b-=1;b>=0;b--)if(this[b]===a)return b;return-1}),a.fn.extend({wangEditor:function(a){if("TEXTAREA"!==this[0].nodeName)return void alert("wangEditor提示：请使用textarea扩展富文本框。");if(this.data("wangEditorFlag"))return void alert("针对一个textarea不能执行两遍wangEditor()事件");this.data("wangEditorFlag",!0),a=a||{};var b=k(this,a);return this.before(b.$editorContainer),this.hide(),b.initSelection(),b}})});